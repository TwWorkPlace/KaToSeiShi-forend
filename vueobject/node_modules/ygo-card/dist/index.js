!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i=e();for(var n in i)("object"==typeof exports?exports:t)[n]=i[n]}}(this,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=19)}([function(t,e,i){"use strict";e.a=JSON.stringify({moldSize:[813,1185],pic:{position:[100,219,614,616],position_lb:[57,213,702,528]},attribute:{position:[680,57,75,75],size:[66,66]},level:{position:[686,145],size:[50,50],distance:55},line:{position:[64,1079],width:683,lineWidth:2},ATK:{font:"attack",fontSize:36,position:[585,1107],maxWidth:72,label:"ATK/",labelPosition:[513,1107]},DEF:{font:"link",fontSize:36,linkFontSize:30,position:[750,1107],maxWidth:72,label:"DEF/",linkLabel:"LINK-",labelPosition:[678,1107],linkLabelPosition:[716,1107]},pendulumNumber:{font:"lbNum",fontSize:52,positonLeft:[88,854],positonRight:[730,854]},linkArrows:{center:[408,528],arrow1:{size:[140,41],position:[-70,308]},arrow2:{size:[70,70],position:[-336,267]}},cardbag:{font:"password",fontSize:24,position:[728,871],linkPosition:[665,872],pendulumPosition:[66,1104]},password:{font:"password",fontSize:23,position:[40,1147]},holo:{position:[743,1115],size:[42,42]},name:{font:"name",fontSize:65,maxWidth:610,position:[65,96]},monsterDesc:{font:"desc",fontSize:24,lbFontSize:22,position:[64,942],lbPosition:[128,770],lineHeight:26,lbLineHeight:24.5,maxLines:6,maxWidth:683,lbMaxLines:5,lbMaxWidth:556},spellDesc:{font:"desc",fontSize:24,position:[66,915],lineHeight:24,maxLines:9,maxWidth:683},race:{font:"race",fontSize:26,position:[53,915],maxWidth:610},type:{font:"type",fontSize:48,position:[750,185],icon:[667,147],iconSize:[46,46]},copyright:{font:"copyright",fontSize:18,position:[730,1146]}})},function(t,e,i){"use strict";i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return r}));const n={type:{2:["spell","tc","",""],4:["trap","tc","",""],17:["monster","tc","",""],33:["monster","xg","",""],65:["monster","rh","tc",""],97:["monster","rh","",""],129:["monster","ys","tc",""],130:["spell","ys","",""],161:["monster","ys","",""],545:["monster","xg","nm",""],673:["monster","ys","lh",""],1057:["monster","xg","tm",""],2081:["monster","xg","ec",""],8193:["monster","tt","tc",""],8225:["monster","tt","",""],4113:["monster","tc","tz",""],4129:["monster","xg","tz",""],4161:["monster","rh","tz","tc"],5153:["monster","xg","tm","tz"],12321:["monster","tt","tz",""],16401:["monster","to","",""],65538:["spell","sg","",""],131074:["spell","yx","",""],131076:["trap","yx","",""],262146:["spell","zb","",""],524290:["spell","cd","",""],1048580:["trap","fj","",""],2097185:["monster","xg","fz",""],2101281:["monster","xg","fz","tz"],4194337:["monster","xg","kt",""],8388609:["monster","cl","tc",""],8388641:["monster","cl","",""],16777249:["monster","xg","lb",""],16777233:["monster","tc","lb",""],16777313:["monster","rh","lb",""],16777761:["monster","xg","lb","lh"],16781329:["monster","tc","lb","tz"],16781345:["monster","xg","lb","tz"],16785441:["monster","tt","lb",""],18874401:["monster","xg","lb","fz"],25165857:["monster","cl","lb",""],33554465:["monster","xg","ts",""],33554977:["monster","xg","lh","ts"],33558561:["monster","xg","tz","ts"],37748769:["monster","xg","kt","ts"],50331681:["monster","xg","lb","ts"],67108865:["monster","lj","tc",""],67108897:["monster","lj","",""]},attribute:{0:"trap",1:"earth",2:"water",4:"fire",8:"wind",16:"light",32:"dark",64:"divine"},race:{1:"warrior",2:"spellcaster",4:"fairy",8:"fiend",16:"zombie",32:"machine",64:"aqua",128:"pyro",256:"rock",512:"wingedbeast",1024:"plant",2048:"insect",4096:"thunder",8192:"dragon",16384:"beast",32768:"beastwarrior",65536:"dinosaur",131072:"fish",262144:"seaserpent",524288:"reptile",1048576:"psychic",2097152:"divinebeast",4194304:"divine",8388608:"wyrm",16777216:"cyberse"},level(t){if(t<13)return t;{const e=t.toString(2);return parseInt(e.substr(e.length-4,e.length-1),2)}}},a={normal:"tc",effect:"xg",ritual:"ys",fusion:"rh",synchro:"tt",xyz:"cl",pendulum:"lb",link:"lj",gemini:"ec",tuner:"tz",union:"tm",toon:"kt",spirit:"lh","flip effect":"fz","flip-effect":"fz","special summon":"ts","special-summon":"ts",equip:"zb","quick play":"sg","quick-play":"sg",field:"cd",counter:"fj",continuous:"yx"},s=function(t){if(0===Object.keys(t).length)return!1;let e,i,{id:a,atk:s,def:o,race:r,type:l,level:c,attribute:p,name:d,desc:h}=t,[f,m,u,y]=n.type[l];if(p=n.attribute[p],r=n.race[r],c=n.level(c),"lb"===u){e=parseInt(h.substr(1));let t=h.split("→")[1];t&&(i=t.split("【")[0].trim().replace(/\r?\n/g,""),h=t.split("】")[1].trim())}return h=h.replace(/(.*?\r?\n)/g,(t,e,i)=>["rh","tt","cl","lj"].includes(m)&&0===i?t:t.trim()),s=-2===s?"?":s,o=-2===o?"?":o,{_id:String(a),name:d,type:f,type2:m,type3:u,type4:y,attack:s,defend:o,race:r,level:c,attribute:p,desc:h,lb_num:e,lb_desc:i}},o=function(t){return a[t]?a[t]:t},r=function(t){const e={...t};return Array.isArray(e.types)&&(e.type=e.types[0],e.type2=e.types[1],e.type3=e.types[2],e.type4=e.types[3]),e.type2&&a[e.type2]&&(e.type2=a[e.type2]),e.type3&&a[e.type3]&&(e.type3=a[e.type3]),e.type4&&a[e.type4]&&(e.type4=a[e.type4]),e}},function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"a",(function(){return a}));const n=t=>{const e=t.split("\r").join(""),[i,n=""]=e.split("#main"),[a,s=""]=n.split("#extra"),[o,r=""]=s.split("!side");return[a?a.trim().split("\n"):[],o?o.trim().split("\n"):[],r?r.trim().split("\n"):[]]},a=t=>{const[e,i,a]=n(t);return Array.from(new Set(e.concat(i).concat(a)))}},function(t,e,i){"use strict";var n=i(0);e.a={moldName:"default",fonts:{cn:{name:"cn.ttf",type:"relative"},number:{name:"number.ttf",type:"relative"},link:{name:"link.ttf",type:"relative"},password:{name:"password.ttf",type:"relative"},copyright:{name:"copyright.ttf",type:"relative"}},style:Object.assign(JSON.parse(n.a),{fontMap:{name:"cn",desc:"cn",race:"cn",attack:"number",link:"link",password:"password",type:"cn",lbNum:"number",copyright:"copyright, 微软雅黑"}}),translate:{attribute:{light:"光",dark:"暗",wind:"風",water:"水",fire:"炎",earth:"地",divine:"神"},type:{tc:"通常",xg:"效果",ys:"儀式",rh:"融合",tk:"衍生物",tt:"同調",cl:"超量",lb:"靈擺",lj:"連接",ec:"二重",tz:"調整",tm:"同盟",kt:"卡通",lh:"靈魂",fz:"反轉",ts:"特殊召喚",zb:"裝備",sg:"速攻",cd:"場地",fj:"反擊",yx:"永續"},race:{dragon:"龍族",warrior:"戰士族",fiend:"惡魔族",spellcaster:"魔法師族",fairy:"天使族",zombie:"不死族",rock:"岩石族",plant:"植物族",insect:"昆蟲族",aqua:"水族",pyro:"炎族",thunder:"雷族",fish:"魚族",seaserpent:"海龍族",wyrm:"幻龍族",dinosaur:"恐龍族",reptile:"爬蟲类族",machine:"機械族",beast:"獸族",wingedbeast:"鳥獸族",beastwarrior:"獸戰士族",psychic:"念動力族",cyberse:"電子界族",divinebeast:"幻神獸族",divine:"創造神族"},spell:"魔法卡",trap:"陷阱卡",brackets:["【","】"]}}},,,function(t,e,i){"use strict";(function(t){i.d(e,"a",(function(){return n}));class n{constructor(t){this.admin=t,this.canvas=this.admin.canvas.getContext("2d")}isPunctuation(t){const e=new RegExp("[\0-ÿ]"),i=new RegExp("[＀-￿]");return e.test(t)||i.test(t)||["。","，","：","【","】","「","」"].includes(t)}descSplit(t,e,i,n=6,a=683){if(!t)return[];const s=this.canvas;s.font=e+"px "+i;const o=t.split("\n");for(;o.length>n;){const t=o.pop();o[n-1]+=t}const r=t=>o.reduce((e,i)=>e+=Math.ceil(t*s.measureText(i).width/a),0);let l=1;for(;r(l)>n&&l>0;)l-=.01;let c=[];for(let t of o){const e=l*s.measureText(t).width,i=Math.ceil(e/a),n=Math.max(l*a,e/i);let o=[],r="";for(let e of t)""===r&&o.length>0&&this.isPunctuation(e)?o[o.length-1]+=e:(r+=e,l*s.measureText(r).width>=n&&(o.push(r),r=""));r&&o.push(r),c=c.concat(o)}return c}descSplitEn(t,e,i,n=6,a=683){if(!t)return[];const s=this.canvas;s.font=e+"px "+i;const o=t.split("\n");for(;o.length>n;){const t=o.pop();o[n-1]+=t}const r=t=>o.reduce((e,i)=>e+=Math.ceil(t*s.measureText(i).width/a),0);let l=1;for(;r(l)>n&&l>0;)l-=.01;let c=[];for(const t of o){const e=l*s.measureText(t).width,i=Math.ceil(e/a),n=Math.max(l*a,e/i),o=[];let r=[];for(const e of t.split(" ")){r.push(e);const t=s.measureText(r.join(" ")).width;l*t>=n&&(l*t-n>s.measureText(" "+e).width/2?(r.pop(),o.push(r),r=[e]):(o.push(r),r=[]))}r.length&&o.push(r),c=c.concat(o)}return c}drawDesc(t,e,i){const n=this.canvas,{maxWidth:a,maxLines:s,lineHeight:o,position:r}=e;for(let e in t){let l=t[e],c=r[0],p=r[1]+e*o;if(e===s-1){n.measureText(l).width<a*i?n.fillText(l,c*i,p*i,n.measureText(l.slice(0,-1)).width):n.fillText(l,c*i,p*i,a*i)}else n.fillText(l,c*i,p*i,a*i)}}drawEnDesc(t,e,i){const n=this.canvas;for(let a in t){let s=t[a],o=e.position[0],r=e.position[1]+a*e.lineHeight;n.fillText(s.join(" "),o*i,r*i,e.maxWidth*i)}}fontMap(e){return void 0!==t||window.__YGOCARDDATA__.fontMap[e]}getFontName(t,e){return e.fontMap[t]||t}draw(t,e,i=this.admin.size,n=this.admin.config.style,a){this.admin.canvas.width=i[0],this.admin.canvas.height=i[1];const s=i[0]/n.moldSize[0],o=this.canvas;let r,l="";this.admin.fastFont&&(l+=this.admin.key+","+this.getFontName(n.name.font,n));try{e.mold&&o.drawImage(e.mold,0,0,i[0],i[1])}catch(t){return}try{e.pic&&("lb"!==t.type3?(o.drawImage(e.pic,n.pic.position[0]*s,n.pic.position[1]*s,n.pic.position[2]*s,n.pic.position[3]*s),t.flash>0&&this.admin.flashImg&&(o.globalAlpha=t.flash,o.drawImage(this.admin.flashImg,n.pic.position[0]*s,n.pic.position[1]*s,n.pic.position[2]*s,n.pic.position[3]*s),o.globalAlpha=1)):(o.drawImage(e.pic,n.pic.position_lb[0]*s,n.pic.position_lb[1]*s,n.pic.position_lb[2]*s,n.pic.position_lb[3]*s),t.flash>0&&this.admin.flashImg&&(o.globalAlpha=t.flash,o.drawImage(this.admin.flashImg,n.pic.position_lb[0]*s,n.pic.position_lb[1]*s,n.pic.position_lb[2]*s,n.pic.position_lb[3]*s),o.globalAlpha=1)))}catch(t){return}if(this.fontMap(this.getFontName(n.name.font,n))){o.save(),o.fillStyle=t.color,o.textBaseline="middle",o.font=n.name.fontSize*s+"px "+this.getFontName(n.name.font,n)+l,o.fillText(t.name,n.name.position[0]*s,n.name.position[1]*s,n.name.maxWidth*s);let e=t.outlineColor,i=t.outlineWidth;"tt"===t.type2&&["#fff","#ffffff","white","#fbd705"].includes(t.color)&&(e=e||"#888",i=i||1.2),e&&i&&(o.strokeStyle=e,o.lineWidth=i*s,o.strokeText(t.name,n.name.position[0]*s,n.name.position[1]*s,n.name.maxWidth*s)),o.restore()}if(e.attribute&&o.drawImage(e.attribute,0,0,n.attribute.size[0],n.attribute.size[1],n.attribute.position[0]*s,n.attribute.position[1]*s,n.attribute.position[2]*s,n.attribute.position[3]*s),e.level&&"monster"===t.type&&"lj"!==t.type2)for(let i=0;i<t.level;i++){let a;a="cl"!==t.type2?n.level.position[0]-n.level.distance*i:n.moldSize[0]-n.level.size[0]-n.level.position[0]+n.level.distance*i,o.drawImage(e.level,a*s,n.level.position[1]*s,n.level.size[0]*s,n.level.size[1]*s)}if(this.fontMap(this.getFontName(n.race.font,n)))if("monster"===t.type)o.fillStyle="#000000",o.font=(n.race.fontWieght?n.race.fontWieght+" ":"")+n.race.fontSize*s+"px "+this.getFontName(n.race.font,n),o.fillText(t._ifm_,n.race.position[0]*s,n.race.position[1]*s,n.race.maxWidth*s);else{let i=t._spellType_;o.fillStyle="#000000",o.font=n.type.fontSize*s+"px "+this.getFontName(n.type.font,n)+l;let a=n.type.position[0]*s-o.measureText(i).width;if(o.fillText(i,a,n.type.position[1]*s),["cd","fj","sg","ys","yx","zb"].includes(t.type2))try{o.drawImage(e.icon,n.type.icon[0]*s,n.type.icon[1]*s,46*s,46*s)}catch(t){console.log(t)}}if(r="monster"===t.type?n.monsterDesc:n.spellDesc,this.fontMap(this.getFontName(r.font,n))){let e;e="en"!==t.lang?this.descSplit(t.desc,r.fontSize,this.getFontName(r.font,n),r.maxLines):this.descSplitEn(t.desc,r.fontSize,this.getFontName(r.font,n),r.maxLines),o.fillStyle="#000";const i=r.style?r.style+" ":"";if(o.font=i+r.fontSize*s+"px "+this.getFontName(r.font,n)+l,"en"!==t.lang?this.drawDesc(e,r,s):this.drawEnDesc(e,r,s),"lb"===t.type3&&t.lb_desc){let e,i=n.monsterDesc;e="en"!==t.lang?this.descSplit(t.lb_desc,i.lbFontSize,i.font,i.lbMaxLines,i.lbMaxWidth):this.descSplitEn(t.lb_desc,i.lbFontSize,i.font,i.lbMaxLines,i.lbMaxWidth),o.fillStyle="#000";const a=i.style?i.style+" ":"";o.font=a+i.lbFontSize*s+"px "+this.getFontName(i.font,n)+l;const r={maxWidth:i.lbMaxWidth,maxLines:i.lbMaxLines,lineHeight:i.lbLineHeight,position:i.lbPosition};"en"!==t.lang?this.drawDesc(e,r,s):this.drawEnDesc(e,r,s)}}if("lb"===t.type3&&void 0!==t.lb_num&&null!==t.lb_num){o.fillStyle="#000000",o.font=n.pendulumNumber.fontSize*s+"px "+this.getFontName(n.pendulumNumber.font,n);let e=n.pendulumNumber.positonLeft,i=n.pendulumNumber.positonRight;o.save();const a=e[0]-o.measureText(t.lb_num).width/2,r=i[0]-o.measureText(t.lb_num).width/2;o.fillText(t.lb_num,a*s,e[1]*s),o.fillText(t.lb_num,r*s,i[1]*s),o.restore()}if(this.fontMap(this.getFontName(n.ATK.font,n))&&("monster"===t.type&&(o.lineWidth=n.line.lineWidth*s,o.beginPath(),o.moveTo(n.line.position[0]*s,n.line.position[1]*s),o.lineTo((n.line.position[0]+n.line.width)*s,n.line.position[1]*s),o.stroke(),o.save(),o.fillStyle="#000000",o.font=n.ATK.fontSize*s+"px "+this.getFontName(n.ATK.font,n),o.textAlign="right",o.fillText(t.attack,n.ATK.position[0]*s,n.ATK.position[1]*s,n.ATK.maxWidth*s),o.fillText(n.ATK.label,n.ATK.labelPosition[0]*s,n.ATK.labelPosition[1]*s),"lj"!==t.type2?(o.fillText(t.defend,n.DEF.position[0]*s,n.DEF.position[1]*s,n.DEF.maxWidth*s),o.fillText(n.DEF.label,n.DEF.labelPosition[0]*s,n.DEF.labelPosition[1]*s)):(t._link_,o.fillStyle="#000000",o.font=n.DEF.linkFontSize*s+"px "+this.getFontName(n.DEF.font,n),o.fillText(t.link_num,n.DEF.position[0]*s,n.DEF.position[1]*s,n.DEF.maxWidth*s),o.fillText(n.DEF.linkLabel,n.DEF.linkLabelPosition[0]*s,n.DEF.linkLabelPosition[1]*s))),o.restore()),"lj"===t.type2){const i=t._link_,a=n.linkArrows,r=(t,i)=>{0===t?i?o.drawImage(e.arrow1_1,a.arrow1.position[0]*s,a.arrow1.position[1]*s,a.arrow1.size[0]*s,a.arrow1.size[1]*s):o.drawImage(e.arrow1_0,a.arrow1.position[0]*s,a.arrow1.position[1]*s,a.arrow1.size[0]*s,a.arrow1.size[1]*s):i?o.drawImage(e.arrow2_1,a.arrow2.position[0]*s,a.arrow2.position[1]*s,a.arrow2.size[0]*s,a.arrow2.size[1]*s):o.drawImage(e.arrow2_0,a.arrow2.position[0]*s,a.arrow2.position[1]*s,a.arrow2.size[0]*s,a.arrow2.size[1]*s)};o.save(),o.translate(a.center[0]*s,a.center[1]*s),o.save(),r(0,i[6]),o.rotate(Math.PI/2),r(0,i[3]),o.rotate(Math.PI/2),r(0,i[1]),o.rotate(Math.PI/2),r(0,i[4]),o.restore(),r(1,i[5]),o.rotate(Math.PI/2),r(1,i[0]),o.rotate(Math.PI/2),r(1,i[2]),o.rotate(Math.PI/2),r(1,i[7]),o.restore()}if(e.holo&&this.admin.holo&&(o.drawImage(e.holo,n.holo.position[0]*s,n.holo.position[1]*s,n.holo.size[0]*s,n.holo.size[1]*s),t.flash>0&&e.holo_flash&&(o.globalAlpha=.7*t.flash,o.drawImage(e.holo_flash,n.holo.position[0]*s,n.holo.position[1]*s,n.holo.size[0]*s,n.holo.size[1]*s),o.globalAlpha=1)),t.cardbag&&this.admin.cardbagSwitch){let e,i;o.save(),o.fillStyle="#000000","cl"===t.type2&&"lb"!==t.type3&&(o.fillStyle="#ffffff"),o.font=n.cardbag.fontSize*s+"px "+this.getFontName(n.cardbag.font,n),o.textAlign="right","lj"!==t.type2?"lb"===t.type3?(o.textAlign="left",e=n.cardbag.pendulumPosition[0]*s,i=n.cardbag.pendulumPosition[1]*s):(e=n.cardbag.position[0]*s,i=n.cardbag.position[1]*s):(e=n.cardbag.linkPosition[0]*s,i=n.cardbag.linkPosition[1]*s),o.fillText(t.cardbag,e,i),o.restore()}t._id&&this.admin.passwordSwitch&&(o.save(),o.fillStyle="#000000","cl"===t.type2&&"lb"!==t.type3&&(o.fillStyle="#ffffff"),o.font=n.password.fontSize*s+"px "+this.getFontName(n.password.font,n),o.fillText(("00000000"+t._id).slice(-8),n.password.position[0]*s,n.password.position[1]*s),o.restore()),o.save(),o.font=n.copyright.fontSize*s+"px "+this.getFontName(n.copyright.font,n),o.fillStyle="#000000","cl"===t.type2&&"lb"!==t.type3&&(o.fillStyle="#ffffff"),o.textAlign="right",o.fillText(t.copyright,n.copyright.position[0]*s,n.copyright.position[1]*s),o.restore(),this.admin.recover&&this.admin.saveToCache(),this.admin.loaded instanceof Function&&this.admin.loaded(),a instanceof Function&&a()}}}).call(this,i(13))},function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(1);class a{constructor(t,e,i){this.dbData=t,this.admin=e;const a=this.admin.translateText||function(){};if(e.recover)for(let e in t)localStorage.getItem(e)&&(t[e]=localStorage.getItem(e));let s=["type4","level","attack","defend","cardbag"];for(let e of s)Object.defineProperty(this,e,{get:()=>t[e],set(i){"type4"===e&&(i=Object(n.a)(i)),t[e]=i,this.draw()}});let o=["name","desc","race"],r={};for(let e of o)r[e]=a(t[e]),Object.defineProperty(this,e,{get(){return this.admin.translate?r[e]:t[e]},set(i){let n;this.admin.translate&&(n=a(i)),t[e]=i,r[e]=n,this.draw(["text"],e)}});Object.defineProperty(this,"lb_desc",{get(){if(t.lb_desc)return t.lb_desc;this._desc_;return this._lb_desc},set(e){this.admin.translate&&(e=a(e)),t.lb_desc=e,this.draw(["text"],"lb_desc")}}),Object.defineProperty(this,"lb_num",{get(){if(t.lb_num)return t.lb_num;this._desc_;return this._lb_num},set(e){t.lb_num=e,this.draw(["text"],"lb_num")}}),Object.defineProperty(this,"type",{get:()=>t.type,set(e){let i=["mold","level","attribute"];("monster"===e&&"monster"!==t.type||"monster"!==e&&"monster"===t.type)&&(t.type2="tc",t.type3=null,t.type4=null,i.push("type")),t.type=e,this.draw(i)}});let l=["type2","type3"];for(let e of l)Object.defineProperty(this,e,{get:()=>t[e],set(i){if(i=Object(n.a)(i),t[e]=i,"monster"===t.type){let e=["mold","level","attribute"];"lj"===t.type2&&(e=e.concat(["arrow1_0","arrow1_1","arrow2_0","arrow2_1"])),this.draw(e)}else this.draw(["mold","level","attribute","icon"])}});Object.defineProperty(this,"attribute",{get:()=>t.attribute,set(e){t.attribute=e,this.draw(["attribute"])}}),Object.defineProperty(this,"lang",{get(){return this.admin.lang},set(t){this.admin.lang=t,this.draw(["attribute"])}}),Object.defineProperty(this,"copyright",{get(){return t.copyright?t.copyright:this.admin.copyright||""},set(e){this.admin.copyright=e,t.copyright=e,this.draw(["text"])}}),Object.defineProperty(this,"link",{get(){return this._link_},set(e){t.link=e,this.draw()}}),Object.defineProperty(this,"_id",{get:()=>t._id,set(e){t._id=e,this.draw(["pic"])}}),Object.defineProperty(this,"color",{get(){return i||this.defaultColor},set(t){i=t,this.draw(["text"])}}),Object.defineProperty(this,"outlineColor",{set(t){outlineColor=t,this.draw.text}});var c=0;Object.defineProperty(this,"flash",{get:()=>c,set(t){c=t,this.draw()}}),this.caller=null,this.getData=function(){let e={};for(let i in t)e[i]=t[i];return e},this.saveToCache=function(){for(let e in t)localStorage.setItem(e,t[e])}}get _attribute_(){const t=this.attribute;return this.admin.config.translate.attribute[t]}get isSpecialMonster(){return["rh","ys","rh","tt","cl","lj"].includes(this.type2)}get _ifm_(){const t=this.admin.config.translate;let e=t.type.tc,i=t.type.xg,n=t.type.lb,a=t.race,s=t.brackets;const o=this.race;if("monster"===this.type){var r=s[0]+(a[o]||o);if(["tc","xg","tk"].includes(this.type2)||(r+="/"+t.type[this.type2]),"tc"!==this.type3&&null!==this.type3&&""!==this.type3){if("lb"===this.type3)var l=n;else l=t.type[this.type3];r+="/"+l}return"tc"!==this.type4&&null!==this.type4&&""!==this.type4&&this.type4!==this.type3&&(r+="/"+t.type[this.type4]),"tc"!==this.type2&&"tc"!==this.type3&&"tc"!==this.type4?r+="/"+i+s[1]:this.isSpecialMonster?r+=s[1]:r+="/"+e+s[1],r}return"spell"===this.type?s[0]+t.spell+s[1]:s[0]+t.trap+s[1]}get _spellType_(){let t,e=this.admin.config.translate.brackets;if("spell"===this.type){let i=this.admin.config.translate.spell;t=e[0]+i}else{let i=this.admin.config.translate.trap;t=e[0]+i}return["cd","fj","sg","ys","yx","zb"].includes(this.type2)?t+=("en"===this.lang?"     ":"   ")+e[1]:t+=e[1],t}get _link_(){if("lj"!==this.type2)return this.link_num=0,[!1,!1,!1,!1,!1,!1,!1,!1];let t=[];if(this.dbData.link instanceof Array&&this.dbData.link.length>=8)t=this.dbData.link.slice(0,8);else{const e=[64,128,256,8,32,1,2,4],i=this.defend;for(const n in e)t.push((i&e[n])===e[n])}return this.link_num=t.reduce((t,e)=>t+=e?1:0,0),t}get defaultColor(){return"monster"===this.type?"cl"===this.type2||"lj"===this.type2?"#fff":"#000":"#fff"}draw(t,e){this.admin.cardFile.update(t,e)}}},function(t,e,i){"use strict";e.a={jp:"ⓒ高橋和希 スタジオ・ダイス/集英社",en:"ⓒ1996 KAZUKI TAKAHASHI",cn:"ⓒ2020 Studio Dice/SHUEISHA, TV TOKYO,KONAMI",new:"ⓒスタジオ·ダイス /集英社·テレビ東京·KONAMI"}},function(t,e,i){"use strict";var n=i(0);e.a={moldName:"cn-simplify",fonts:{"cn-simplify":{name:"cn_simplify.ttf",type:"relative"},number:{name:"number.ttf",type:"relative"},link:{name:"link.ttf",type:"relative"},password:{name:"password.ttf",type:"relative"}},style:Object.assign(JSON.parse(n.a),{fontMap:{name:"cn-simplify",desc:"cn-simplify",race:"cn-simplify",attack:"number",link:"link",password:"password",type:"cn-simplify",lbNum:"number",copyright:"password"},type:{font:"type",fontSize:44,position:[753,187],icon:[668,147],iconSize:[46,46]}}),translate:{attribute:{light:"光",dark:"暗",wind:"风",water:"水",fire:"炎",earth:"地",divine:"神"},type:{tc:"通常",xg:"效果",ys:"仪式",rh:"融合",tk:"衍生物",tt:"同调",cl:"超量",lb:"灵摆",lj:"连接",ec:"二重",tz:"调整",tm:"同盟",kt:"卡通",lh:"灵魂",fz:"反转",ts:"特殊召唤",zb:"装备",sg:"速攻",cd:"场地",fj:"反击",yx:"永续"},race:{dragon:"龙族",warrior:"战士族",fiend:"恶魔族",spellcaster:"魔法师族",fairy:"天使族",zombie:"不死族",rock:"岩石族",plant:"植物族",insect:"昆虫族",aqua:"水族",pyro:"炎族",thunder:"雷族",fish:"鱼族",seaserpent:"海龙族",wyrm:"幻龙族",dinosaur:"恐龙族",reptile:"爬虫类族",machine:"机械族",beast:"兽族",wingedbeast:"鸟兽族",beastwarrior:"兽战士族",psychic:"念动力族",cyberse:"电子界族",divinebeast:"幻神兽族",divine:"创造神族"},spell:"魔法卡",trap:"陷阱卡",brackets:["【","】"]}}},function(t,e,i){"use strict";var n=i(0);e.a={moldName:"default-jp",moldUrl:"./mold/",fonts:{jp:{name:"jp.ttf",type:"relative"},number:{name:"number.ttf",type:"relative"},link:{name:"link.ttf",type:"relative"},password:{name:"password.ttf",type:"relative"},copyright:{name:"copyright.ttf",type:"relative"}},style:Object.assign(JSON.parse(n.a),{fontMap:{name:"jp",desc:"jp",race:"jp",attack:"number",link:"link",password:"password",type:"jp",lbNum:"number",copyright:"copyright, 微软雅黑"},type:{font:"type",fontSize:48,position:[760,187],icon:[667,147],iconSize:[46,46]}}),translate:{attribute:{light:"光",dark:"闇",wind:"風",water:"水",fire:"炎",earth:"地",divine:"神"},type:{tc:"通常",xg:"効果",ys:"儀式",rh:"融合",tk:"トークン",tt:"シンクロ",cl:"エクシーズ",lb:"ペンデュラム",lj:"リンク",ec:"デュアル",tz:"チューナー",tm:"ユニオン",lh:"スピリット",fz:"リバース",kt:"トゥーン",ts:"特殊召喚",zb:"装備",sg:"速攻",cd:"フィールド",fj:"カウンター",yx:"永続"},race:{dragon:"ドラゴン族",warrior:"戦士族",fiend:"悪魔族",spellcaster:"魔法使い族",fairy:"天使族",zombie:"アンデット族",rock:"岩石族",plant:"植物族",insect:"昆虫族",aqua:"水族",pyro:"炎族",thunder:"雷族",fish:"魚族",seaserpent:"海竜族",wyrm:"幻竜族",dinosaur:"恐竜族",reptile:"爬虫類族",machine:"機械族",beast:"獣族",wingedbeast:"鳥獣族",beastwarrior:"獣戰士族",psychic:"サイキック族",cyberse:"サイバース族",divinebeast:"幻神獣族",divine:"創造神族"},spell:"魔法カード",trap:"罠カード",brackets:["【","】"]}}},function(t,e,i){"use strict";var n=i(0);e.a={moldName:"jp-notation",moldUrl:"./mold/",fonts:{"jp-notation":{name:"jp_notation.otf",type:"relative"},number:{name:"number.ttf",type:"relative"},link:{name:"link.ttf",type:"relative"},password:{name:"password.ttf",type:"relative"},copyright:{name:"copyright.ttf",type:"relative"}},style:Object.assign(JSON.parse(n.a),{fontMap:{name:"jp-notation",desc:"jp-notation",race:"jp-notation",attack:"number",link:"link",password:"password",type:"jp-notation",lbNum:"number",copyright:"copyright, 微软雅黑"},race:{font:"race",fontSize:26,position:[64,915],maxWidth:610},type:{font:"type",fontSize:48,position:[738,187],icon:[667,147],iconSize:[46,46]}}),translate:{attribute:{light:"光",dark:"闇",wind:"風",water:"水",fire:"炎",earth:"地",divine:"神"},type:{tc:"通常",xg:"效果",ys:"儀式",rh:"融合",tk:"衍生物",tt:"シンクロ",cl:"エクシーズ",lb:"ペンデュラム",lj:"リンク",ec:"デュアル",tz:"チューナー",tm:"ユニオン",lh:"スピリット",fz:"リバース",kt:"トゥーン",ts:"特殊召喚",zb:"装备",sg:"速攻",cd:"场地",fj:"反击",yx:"永续"},race:{dragon:"ドラゴン族",warrior:"戦士族",fiend:"悪魔族",spellcaster:"魔法使い族",fairy:"天使族",zombie:"アンデット族",rock:"岩石族",plant:"植物族",insect:"昆虫族",aqua:"水族",pyro:"炎族",thunder:"雷族",fish:"魚族",seaserpent:"海竜族",wyrm:"幻竜族",dinosaur:"恐竜族",reptile:"爬虫類族",machine:"機械族",beast:"獣族",wingedbeast:"鳥獣族",beastwarrior:"獣戰士族",psychic:"サイキック族",cyberse:"サイバース族",divinebeast:"幻神獣族",divine:"創造神族"},spell:"魔法カード",trap:"罠カード",brackets:["【","】"]}}},function(t,e,i){"use strict";var n=i(0);e.a={moldName:"default-en",fonts:{en_name:{name:"en_name.ttf",type:"relative"},en:{name:"en.ttf",type:"relative"},number:{name:"number.ttf",type:"relative"},link:{name:"link.ttf",type:"relative"},race:{name:"race.ttf",type:"relative"},password:{name:"password.ttf",type:"relative"}},style:Object.assign(JSON.parse(n.a),{fontMap:{name:"en_name",desc:"en",race:"race",attack:"number",link:"link",password:"password",type:"race",lbNum:"number",copyright:"password"},name:{font:"name",fontSize:65,maxWidth:610,position:[65,100]},race:{font:"race",fontSize:26,position:[64,915],maxWidth:610},type:{font:"type",fontSize:42,position:[728,183],icon:[669,147],iconSize:[46,46]}}),translate:{attribute:{light:"light",dark:"dark",wind:"wind",water:"water",fire:"fire",earth:"earth",divine:"divine"},type:{tc:"normal",xg:"effect",ys:"ritual",rh:"fusion",tk:"token",tt:"synchro",cl:"xyz",lb:"pendulum",lj:"link",ec:"gemini",tz:"tuner",tm:"union",kt:"toon",lh:"spirit",fz:"flip effect",ts:"special summon",zb:"equip",sg:"quick-play",cd:"field",fj:"counter",yx:"continuous"},race:{dragon:"Dragon",warrior:"Warrior",fiend:"Fiend",spellcaster:"Spellcaster",fairy:"Fairy",zombie:"Zombie",rock:"Rock",plant:"Plant",insect:"Insect",aqua:"Aqua",pyro:"Pyro",thunder:"Thunder",fish:"Fish",seaserpent:"Sea Serpent",wyrm:"Wyrm",dinosaur:"Dinosaur",reptile:"Reptile",machine:"Machine",beast:"Beast",wingedbeast:"Winged Beast",beastwarrior:"Beast-Warrior",psychic:"Psychic",cyberse:"Cyberse",divinebeast:"Divine-Beast",divine:"Divine"},spell:"Spell Card",tragic:"Trap Card",brackets:["[","]"]}}},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},,,,,,function(t,e,i){"use strict";i.r(e),i.d(e,"Card",(function(){return v})),i.d(e,"config",(function(){return x})),i.d(e,"configs",(function(){return z})),i.d(e,"variation",(function(){return l.c})),i.d(e,"transType",(function(){return l.b})),i.d(e,"readYDK",(function(){return c.b})),i.d(e,"getIdSetFromYDK",(function(){return c.a}));var n=i(6),a=i(7);const s=function({method:t="GET",path:e,data:i,responseType:n}){return new Promise((a,s)=>{let o=new XMLHttpRequest;if(n&&(o.responseType=n),"GET"!==t&&"get"!==t||!i)o.open(t,e,!0),o.send(i);else{let n=[];for(let t in i)n.push(t+"="+i[t]);let a=e+"?"+n.join("&");o.open(t,a,!0),o.send()}o.onreadystatechange=function(){4===o.readyState&&(o.status>=200&&o.status<300||304===o.status?a("blob"===n?o.response:o.responseText):s(new Error("ajax send failed")))}})},o="__YGOCARDDATA__";class r{constructor(t){if(this.admin=t,this.fileContent={},this.updateMap=new Set,this.updateCaller=null,window[o].cardPicCache||(window[o].cardPicCache={}),!window[o].fontMap){let t=document.createElement("div");t.style.width="0",t.style.height="0",t.style.overflow="hidden",document.body.appendChild(t),window[o].fontMap={fontBox:t}}}log(...t){this.admin.log(this,...t)}draw(...t){this.admin.draw(...t)}async loadAll(){return this.fileContent=await this.getFiles(this.fileList),this.admin.renderState=!0,this.draw(),this.loadCardPic().then(()=>{this.draw()}),await this.loadFonts(this.admin.config.fonts).then(()=>{setTimeout(()=>{this.draw()},1e3)}),!0}async update(t,e){Array.isArray(t)&&t.forEach(t=>this.updateMap.add(t)),window.cancelAnimationFrame(this.updateCaller),this.updateCaller=window.requestAnimationFrame(()=>this._update_())}async _update_(){const t=Array.from(this.updateMap.values()),e=[];if(t)for(let i of t){let t;"pic"===i?e.push(this.loadCardPic()):(t=this.fileList[i],t&&e.push((async()=>(this.fileContent[i]=await this.getFile(t),!0))()))}return await Promise.all(e),this.updateMap.clear(),this.draw(),!0}get fileList(){const t=this.admin.moldPath+"/",e=this.admin.data,i=this.admin.config;let n={},a="";return i.devicePixelRatio&&(a=(t=>{const e=devicePixelRatio||1;return t[e]?t[e]:t[1]})(i.devicePixelRatio).file.frame||""),"monster"===e.type?("lb"!==e.type3?n.mold=t+"frame/"+a+e.type+"_"+e.type2+".jpg":n.mold=t+"frame/"+a+e.type+"_"+e.type2+"_lb.jpg","lj"===e.type2&&(n.arrow1_0=t+"arrow/arrow1_0.png",n.arrow1_1=t+"arrow/arrow1_1.png",n.arrow2_0=t+"arrow/arrow2_0.png",n.arrow2_1=t+"arrow/arrow2_1.png"),n.attribute=`${t}attribute/${e.lang}/${e.attribute}.png`,"cl"===e.type2?n.level=t+"star/rank.png":n.level=t+"star/level.png"):(n.mold=t+"frame/"+a+e.type+".jpg",n.attribute=`${t}attribute/${e.lang}/${e.type}.png`,["cd","fj","sg","ys","yx","zb"].includes(e.type2)&&(n.icon=t+"icon/"+e.type2+".png")),this.admin.holo&&(n.holo=t+"holo/holo.png",n.holo_flash=t+"holo/holo.jpg"),n}async fileExist(t){const e=localStorage.getItem("mold-version")||0;return Number("1.1")!=Number(e)&&localStorage.clear(),new Promise((e,i)=>{let n=localStorage.getItem(t);if(n){this.log(t,"load localstorage");let a=document.createElement("img");a.src=n,a.setAttribute("crossOrigin","anonymous"),a.onload=function(){e(a)},a.onerror=function(t){i(t)}}else e(!1)})}download(t){return new Promise((e,i)=>{let n=document.createElement("img");n.src=t,n.setAttribute("crossOrigin","anonymous"),n.onload=function(){e(n)},n.onerror=function(t){i(t)}})}async getFile(t,e=!0){let i=await this.fileExist(t);return i||(i=await this.download(t),e&&this.saveImage(t,i)),i}getCorsPic(t){return s({method:"GET",path:t,responseType:"blob"}).then(t=>{let e=URL.createObjectURL(t);return this.download(e)}).catch(t=>console.log(t))}async getFiles(t){let e={};for(let i in t)e[i]=await this.getFile(t[i]);return e}async loadCardPic(){let t=this.admin.getPic(this.admin.data._id);const e=window[o].cardPicCache;if(e.hasOwnProperty(t)){let i=e[t];i instanceof Promise?await i.then(t=>{this.fileContent.pic=t}):this.fileContent.pic=i}else e[t]=new Promise(i=>{this.getCorsPic(t).then(i=>{this.fileContent.pic=i,e[t]=i}).finally(()=>{i()})}),await e[t];return this.admin.clearFlash(),this.admin.picLoaded(),!0}saveImage(t,e){let i=document.createElement("canvas"),n=i.getContext("2d");i.width=e.naturalWidth,i.height=e.naturalHeight,n.drawImage(e,0,0,e.naturalWidth,e.naturalHeight);let a=i.toDataURL("image/png");try{localStorage.setItem(t,a),localStorage.setItem("mold-version","1.1"),this.log(t,"successful save the image")}catch(t){this.log("Storage failed: "+t)}}async loadFont(t,e){if(1===window[o].fontMap[e]){var i=document.createElement("style");i.setAttribute("type","text/css"),i.setAttribute("crossOrigin","anonymous"),i.setAttribute("class",e);let n="\n      @font-face {\n        font-family: '"+e+"';\n        src: url('"+t+"');\n      }";i.appendChild(document.createTextNode(n)),document.head.appendChild(i);let a=document.createElement("p");a.innerText="Yami",a.style.fontFamily=e,window[o].fontMap.fontBox.appendChild(a),window[o].fontMap[e]=2;let r=await s({method:"GET",path:t});return window[o].fontMap[e]=3,r}if(2===window[o].fontMap[e]){let i=await s({method:"GET",path:t});return window[o].fontMap[e]=3,i}}loadFonts(t){for(let t in this.admin.config.fonts)window[o].fontMap.hasOwnProperty(t)||(window[o].fontMap[t]=1);let e=[];for(let i in t)if(3!==window[o].fontMap[i]){let n;n="relative"===t[i].type?this.admin.moldPath+"/font/"+t[i].name:t[i].name,this.admin.fontLoaded({type:"font",status:!0,content:i}),e.push(this.loadFont(n,i))}return Promise.all(e).then(()=>{this.admin.fontsLoaded({type:"end"})})}}var l=i(1),c=i(2);const p=t=>`http://115.159.193.88:1803/public/pics/500/${t}.jpg`;var d=i(8),h=i(3),f=i(9),m=i(0),u={moldName:"cn-web",devicePixelRatio:{1:{file:{frame:"250/"}},2:{file:{frame:"500/"}}},fonts:{number:{name:"number.ttf",type:"relative"},link:{name:"link.ttf",type:"relative"},password:{name:"password.ttf",type:"relative"}},style:Object.assign(JSON.parse(m.a),{fontMap:{name:"STKaiti, BiauKai, KaiTi, 楷体, serif",desc:"STKaiti, BiauKai, KaiTi, 楷体, serif",race:"STKaiti, BiauKai, KaiTi, 楷体, serif",attack:"number",link:"link",password:"password",type:"STKaiti, BiauKai, KaiTi, 楷体, serif",lbNum:"number",copyright:"password"},type:{font:"type",fontSize:44,position:[753,187],icon:[668,147],iconSize:[46,46]}}),translate:{attribute:{light:"光",dark:"暗",wind:"风",water:"水",fire:"炎",earth:"地",divine:"神"},type:{tc:"通常",xg:"效果",ys:"仪式",rh:"融合",tk:"衍生物",tt:"同调",cl:"超量",lb:"灵摆",lj:"连接",ec:"二重",tz:"调整",tm:"同盟",kt:"卡通",lh:"灵魂",fz:"反转",ts:"特殊召唤",zb:"装备",sg:"速攻",cd:"场地",fj:"反击",yx:"永续"},race:{dragon:"龙族",warrior:"战士族",fiend:"恶魔族",spellcaster:"魔法师族",fairy:"天使族",zombie:"不死族",rock:"岩石族",plant:"植物族",insect:"昆虫族",aqua:"水族",pyro:"炎族",thunder:"雷族",fish:"鱼族",seaserpent:"海龙族",wyrm:"幻龙族",dinosaur:"恐龙族",reptile:"爬虫类族",machine:"机械族",beast:"兽族",wingedbeast:"鸟兽族",beastwarrior:"兽战士族",psychic:"念动力族",cyberse:"电子界族",divinebeast:"幻神兽族",divine:"创造神族"},spell:"魔法卡",trap:"陷阱卡",brackets:["【","】"]}},y=i(10),g=i(11),b=i(12);const w=()=>null;class v{constructor({data:t,canvas:e,size:i,moldPath:n="./mold",lang:s="cn",config:o=h.a,getPic:r=p,fontLoaded:l=w,imageLoaded:c=w,fontsLoaded:f=w,imagesLoaded:m=w,picLoaded:u=w,loaded:y=w,recover:g=!1,holo:b=!0,copyright:v=d.a.jp,cardbagSwitch:x=!1,passwordSwitch:z=!1,translate:S=!1,verbose:_=!1,autoResize:k=!0,translateFunction:j=function(){}}){if(this.RATE=1185/813,window.hasOwnProperty("__YGOCARDDATA__")||(window.__YGOCARDDATA__={}),this.recover=g,g){var T=Object.assign({},o);for(let t in o)localStorage.getItem(t)&&(T[t]=JSON.parse(localStorage.getItem(t)))}this.config=T||o,this.key=t._id,"/"===n[n.length-1]&&(n=n.substring(0,n.length-1)),this.moldPath=n,this.fontLoaded=l,this.imageLoaded=c,this.fontsLoaded=f,this.imagesLoaded=m,this.picLoaded=u,this.loaded=y,this.getPic=r,this.lang=s,this.imgStatus=!1,this.db_id=null,this.flashImg=null,this.copyright=v,this.holo=b,this.cardbagSwitch=x,this.passwordSwitch=z,this.translate=S,this.translateFunction=j,this.verbose=_,this.autoResize=k,this.renderState=!1,this.data=new a.a(this.transType(t),this),this.size=i,e&&this.bind(e,i)}log(t,...e){this.verbose&&console.log(...e)}bind(t,e){this.canvas=t;let i=this.getPixelRatio;e?this.size=[e[0]*i,e[1]*i]:this.size?this.size=[this.size[0]*i,this.size[1]*i]:(this.size=this.ansysSize(),this.autoResize&&(this.sizeObserver=new ResizeObserver(()=>{this.resize()}),this.sizeObserver.observe(this.canvas),this.attriObserver=new MutationObserver(()=>{this.resizer&&(clearTimeout(this.resizer),this.resizer=null)}),this.attriObserver.observe(this.canvas,{attributes:!0,attributeFilter:["width","height"]}))),this.cardDrawer=new n.a(this),this.cardFile=new r(this)}async render(){return await this.cardFile.loadAll(),!0}clearFlash(){this.flashImg=null,this.data.flash=0}feed(t,e=!1){this.cardFile.fileContent.pic=t,this.imgStatus=e,this.clearFlash(),this.draw()}changeConfig(t){this.config=t,this.render()}draw(t,e){this.renderState&&this.cardDrawer.draw(this.data,this.cardFile.fileContent,t,e)}async save(t,e=[1626,2370]){let[i,n]=[this.canvas.width,this.canvas.height];await this.draw(e);let a=this.canvas.toDataURL("image/png");for(var s=atob(a.split(",")[1]),o=s.length,r=new Uint8Array(o),l=0;l<o;l++)r[l]=s.charCodeAt(l);let c=new Blob([r]);var p=URL.createObjectURL(c),d=document.createElement("a");d.download=t||this.data.name+".png",d.href=p,d.click(),this.draw()}autoDraw(){setInterval(()=>{this.draw()},200)}feedData(t){for(let e in t)this.data[e]=t[e]}copy(t){this.cardDrawer.draw(t.data,t.cardFile.fileContent)}get getData(){return this.data.getData()}saveToCache(){this.data.saveToCache();for(let t in this.config){let e=JSON.stringify(this.config[t]);localStorage.setItem(t,e)}localStorage.setItem("lang",this.lang)}feedFlash(t){this.flashImg=t,this.data.flash=0}rounded(t){let e=.5+t|0;return e=~~(.5+t),e=.5+t<<0,e}ansysSize(){let t=this.getPixelRatio,e=t*this.canvas.clientWidth,i=t*this.canvas.clientHeight,n=i/e;return n>this.RATE?i=e*this.RATE:this.RATE>n&&(e=i/this.RATE),e=this.rounded(e),i=this.rounded(i),Math.abs(e-this.canvas.width)/this.canvas.width<=.01||Math.abs(i-this.canvas.height)/this.canvas.height<=.01?[this.canvas.width,this.canvas.height]:[e,i]}resize(t=500){this.resizer&&clearTimeout(this.resizer),this.resizer=setTimeout(()=>{this._resize_()},t)}_resize_(){this.size=this.ansysSize(),this.draw(this.size)}get getPixelRatio(){let t=this.canvas.getContext("2d"),e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e}transType(t){return Object(l.b)(t)}static transData(t){return Object(l.c)(t)}static readYDK(t){return Object(c.b)(t)}static getData(t){return new v({data:t}).data}}const x=h.a,z={cn:h.a,cnSimplify:f.a,cnWeb:u,jp:y.a,jpNotation:g.a,en:b.a}}])}));